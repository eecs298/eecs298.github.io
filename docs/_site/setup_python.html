<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
<!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Python Virtual Environment | EECS 298: Social Consequences of Computing</title>
<meta name="generator" content="Jekyll v3.9.2" />
<meta property="og:title" content="Python Virtual Environment" />
<meta property="og:locale" content="en_US" />
<meta property="og:site_name" content="EECS 298: Social Consequences of Computing" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Python Virtual Environment" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","headline":"Python Virtual Environment","url":"/setup_python.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="preload" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" as="style" crossorigin="anonymous" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr">
        <link rel="icon" href="https://michigan.it.umich.edu/news/wp-content/uploads/2017/01/favicon.png">
        <link rel="stylesheet" href="https://eecs485staff.github.io/primer-spec/assets/v1.10/css/primer-spec-base.css">

        <!--
            This page is formatted using Primer Spec.
            Would you like to contribute to the theme?
            Check out: https://github.com/eecs485staff/primer-spec
        -->
        <script>
            window.PrimerSpecConfig = {
                pdfPath: null, // @managed by build-primer-spec-action
                siteQualifiedBaseUrl: '/',
                hideSidebarOnLoad: false,
                disableSidebar: false,
                defaultSubthemeName: 'default',
                defaultSubthemeMode: 'system',
                sitemapEnabled: false,
                sitemapUrls: [],
                sitemapLabel: undefined,
                sitemapSiteTitle: 'EECS 298: Social Consequences of Computing',
                useLegacyCodeBlocks: false,
                defaultCodeblockVariant: "enhanced",
                disableJokes: false
            };
        </script>
        <script src="https://eecs485staff.github.io/primer-spec/assets/v1.10/js/primer_spec_plugin.min.js" crossorigin="anonymous" defer></script>
    </head>
    <body>
        <div id="primer-spec-top"></div>
        <div id="primer-spec-app-container" onclick="return true;"></div>

        <div id="primer-spec-plugin-main-content">
            
            <h1 class="primer-spec-toc-ignore"><a href="/">EECS 298: Social Consequences of Computing</a></h1>
            

            <h1 class="primer-spec-toc-ignore" id="pythonvirtual-environment-tutorial">Python/Virtual Environment Tutorial</h1>

<p>This document will guide you through installing Python and setting up a Python Virtual Environment.</p>

<h2 id="install-python">Install Python</h2>
<p>Install a recent version of Python.</p>

<h3 class="primer-spec-toc-ignore" id="macos">macOS</h3>

<p>You might already have Python installed, although your version might be different.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python3 <span class="nt">--version</span>
<span class="go">Python 3.10.8
</span></code></pre></div></div>

<p>If you do not have Python or your version of Python is older than 3.6, install a recent version of Python using the <a href="https://brew.sh/">Homebrew package manager</a>.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>brew <span class="nb">install </span>python3
<span class="gp">$</span><span class="w"> </span>python3 <span class="nt">--version</span>
<span class="go">Python 3.10.8
</span></code></pre></div></div>

<h3 class="primer-spec-toc-ignore" id="wsl-or-linux">WSL or Linux</h3>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get update
<span class="gp">$</span><span class="w"> </span><span class="nb">sudo </span>apt-get <span class="nb">install </span>python3 python3-pip python3-venv python3-wheel python3-setuptools
</code></pre></div></div>

<div class="primer-spec-callout warning">
  <p><strong>Pitfall:</strong> On the CAEN Linux servers, the package manager is <code class="language-plaintext highlighter-rouge">yum</code> insteal of <code class="language-plaintext highlighter-rouge">apt-get</code>. However, Python should be up-to-date already on these servers, so it shouldn’t be an issue.</p>
</div>

<h2 id="create-a-python-virtual-environment">Create a Python virtual environment</h2>
<p>Virtual environments are used to create containers with separate installed libraries. They are useful when you want to install different Python programs that have different third party package dependencies. For example, you might have different virtual environments for different course assignments, as different courses or assignments may require different third party packages or different versions of those packages. More on venv and the creation of virtual environments <a href="https://docs.python.org/3/library/venv.html">can be found here</a>.</p>

<p>This section will help you install the Python tools and packages locally, which won’t affect Python tools and packages installed elsewhere on the machine.</p>

<p>After finishing this section, you’ll have a folder called <code class="language-plaintext highlighter-rouge">env/</code> that contains all the Python packages you need for this project.</p>

<p>Create a virtual environment in your project’s root directory.  ())</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/creiglas/eecs298
</span><span class="gp">$</span><span class="w"> </span>python3 <span class="nt">-m</span> venv <span class="nb">env</span>
</code></pre></div></div>

<p>Activate virtual environment.  You’ll need to do this every time you start a new shell.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">source env</span>/bin/activate
</code></pre></div></div>

<p>We now have a complete local environment for Python.  Everything lives in one directory.  Environment variables point to this virtual environment.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$VIRTUAL_ENV</span>
<span class="go">/creiglas/eecs298/env
</span></code></pre></div></div>

<p>We have a Python interpreter installed inside the virtual environment.  <code class="language-plaintext highlighter-rouge">which python</code> tells you exactly which python executable file will be used when you type <code class="language-plaintext highlighter-rouge">python</code>.  Because we’re in a virtual environment, there’s more than one option!</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>which python3     <span class="c"># Default python exectuable</span>
<span class="go">/creiglas/eecs298/env/bin/python
</span><span class="gp">$</span><span class="w"> </span>which <span class="nt">-a</span> python  <span class="c"># All python executables</span>
<span class="go">/creiglas/eecs298/env/bin/python3
/usr/local/bin/python3
/usr/bin/python3
</span></code></pre></div></div>

<p>There’s a package manager for Python called <code class="language-plaintext highlighter-rouge">pip</code> installed in the virtual environment.  That will help us install Python packages later.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>which pip
<span class="go">/creiglas/eecs298/env/bin/pip
</span><span class="gp">$</span><span class="w"> </span>pip <span class="nt">--version</span>
<span class="gp">pip 9.0.1 from /creiglas/eecs298/env/lib/python3.7/site-packages (python 3.7)  #</span><span class="w"> </span>Your version may be different
</code></pre></div></div>

<div class="primer-spec-callout warning">
  <p><strong>Pitfall:</strong> You may face an issue where the <code class="language-plaintext highlighter-rouge">python</code> and/or <code class="language-plaintext highlighter-rouge">pip</code> commands are not recognized on your machine even after following these steps. In this case, substitute and commands referencing these with <code class="language-plaintext highlighter-rouge">python3</code> and <code class="language-plaintext highlighter-rouge">pip3</code> to explicitly reference the executables in your Python 3.x installation.</p>
</div>

<p>Python packages live in the virtual environment.  We can see that Python’s own tools are already installed (<code class="language-plaintext highlighter-rouge">pip</code> and <code class="language-plaintext highlighter-rouge">setuptools</code>).</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">ls env</span>/lib/python3.7/site-packages/ <span class="c"># Your version may be different</span>
<span class="go">pip
setuptools
</span><span class="c">...
</span></code></pre></div></div>

<p>Upgrade the Python tools in your virtual environment</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>pip <span class="nb">install</span> <span class="nt">--upgrade</span> pip setuptools wheel
</code></pre></div></div>

<p>Install <code class="language-plaintext highlighter-rouge">numpy</code>. We’ll use this tool later.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>pip <span class="nb">install </span>numpy
</code></pre></div></div>

<h2 id="understanding-virtual-environments">Understanding Virtual Environments</h2>
<p>This section will give more detail about virtual environments and how they work.  Simply put, a virtual environment is a bunch of files (located in <code class="language-plaintext highlighter-rouge">env/</code> in this tutorial) used by Python.</p>

<h3 id="environment">Environment</h3>
<p>An environment is a collection of <em>environment variables</em> that are inputs to your shell and your programs.</p>

<p>Print the names and values of all environment variables using the <code class="language-plaintext highlighter-rouge">env</code> command.  You’ll see key/value pairs used by the shell and used by programs.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">env</span>
<span class="c">...
</span><span class="go">PWD=/creiglas/eecs298
HOME=/creiglas
USER=creiglas
PATH=/usr/local/bin:/usr/bin:/bin
</span><span class="c">...
</span></code></pre></div></div>

<p>An important example of an environment variable is <code class="language-plaintext highlighter-rouge">PATH</code>, which tells your shell where to look for commands like <code class="language-plaintext highlighter-rouge">ls</code>, <code class="language-plaintext highlighter-rouge">cd</code>, <code class="language-plaintext highlighter-rouge">python</code> and so on.  It’s a colon-separated list (<code class="language-plaintext highlighter-rouge">:</code>).  You can print the value of one variable using the dollar sign ‘<code class="language-plaintext highlighter-rouge">$</code>’.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$PATH</span>
<span class="go">/usr/local/bin:/usr/bin:/bin
</span><span class="gp">$</span><span class="w"> </span><span class="nb">printenv </span>PATH  <span class="c"># Alternative</span>
<span class="go">/usr/local/bin:/usr/bin:/bin
</span><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$PATH</span> | <span class="nb">tr</span> <span class="s1">':'</span> <span class="s1">'\n'</span>
<span class="go">/usr/local/bin
/usr/bin
/bin
</span></code></pre></div></div>

<p>Notice that each item in the list is a directory that contains executables, for example <code class="language-plaintext highlighter-rouge">/usr/local/bin</code> usually contains the <code class="language-plaintext highlighter-rouge">python3</code> executable on macOS with Homebrew (<code class="language-plaintext highlighter-rouge">/opt/homebrew/bin</code> on Apple Silicon M1).</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">ls</span> /usr/local/bin
<span class="c">...
</span><span class="go">python3
</span><span class="c">...
</span></code></pre></div></div>

<h3 id="environment-variables-inside-a-python-program">Environment variables inside a Python program</h3>
<p>You can set any environment variable you want.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">MESSAGE</span><span class="o">=</span><span class="s2">"hello world"</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$MESSAGE</span>
<span class="go">hello world
</span></code></pre></div></div>

<p>Environment variables are accessible from programs, like this <code class="language-plaintext highlighter-rouge">test.py</code>.</p>
<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"""test.py"""</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="k">print</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">environ</span><span class="p">[</span><span class="s">"MESSAGE"</span><span class="p">])</span>
</code></pre></div></div>

<p>Set an environment variable and run the program.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">export </span><span class="nv">MESSAGE</span><span class="o">=</span><span class="s2">"hello world"</span>
<span class="gp">$</span><span class="w"> </span>python3 test.py
<span class="go">hello world
</span></code></pre></div></div>

<p>This example shows that environment variables are simply another way to provide input to a running program.</p>

<h2 id="virtual-environment">Virtual environment</h2>
<p>A virtual environment is a self-contained directory that contains a Python installation and a number of additional Python packages.</p>

<p>As you saw earlier, the command to create a virtual environment creates a new directory, <code class="language-plaintext highlighter-rouge">env</code> in this example.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>python3 <span class="nt">-m</span> venv <span class="nb">env</span>  <span class="c"># you ran this earlier</span>
<span class="gp">$</span><span class="w"> </span><span class="nb">ls env</span>/
<span class="go">bin  include  lib  pyvenv.cfg
</span></code></pre></div></div>

<p>The virtual environment contains a <code class="language-plaintext highlighter-rouge">bin/</code> directory with executables.  It also contains a <code class="language-plaintext highlighter-rouge">lib/</code> directory where Python third party packages live.  Your versions might be different.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">ls env</span>/bin/
<span class="c">...
</span><span class="go">pip
python
</span><span class="c">...
</span><span class="gp">$</span><span class="w"> </span><span class="nb">ls env</span>/lib/python3.7/site-packages/ <span class="c"># Your version may be different</span>
<span class="go">__pycache__      pip-19.2.3.dist-info  setuptools-41.2.0.dist-info
easy_install.py  pkg_resources         pip              setuptools
</span></code></pre></div></div>

<h3 id="activate-a-virtual-environment">Activate a virtual environment</h3>
<p>In the previous example, we used the virtual environment by calling its Python executable explicitly (e.g., <code class="language-plaintext highlighter-rouge">./env/bin/python</code>).  As a convenience, we can temporarily make this version the default.</p>

<p>The <code class="language-plaintext highlighter-rouge">bin/activate</code> script adds <code class="language-plaintext highlighter-rouge">env/bin</code> to the <code class="language-plaintext highlighter-rouge">PATH</code> environment variable, making it the first place to look for commands.  Notice that <code class="language-plaintext highlighter-rouge">/creiglas/eecs298/env/bin</code> is first in the list.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">source env</span>/bin/activate
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$PATH</span>
<span class="go">/creiglas/eecs298/env/bin:/usr/local/bin:/usr/bin:/bin
</span><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$PATH</span> | <span class="nb">tr</span> <span class="s1">':'</span> <span class="s1">'\n'</span>
<span class="go">/creiglas/eecs298/env/bin
/usr/local/bin
/usr/bin
/bin
</span></code></pre></div></div>

<p>Ask the shell where all the <code class="language-plaintext highlighter-rouge">python</code> executables live, then which one is the default.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>which <span class="nt">-a</span> python
<span class="go">/creiglas/eecs298/env/bin/python
/usr/local/bin/python
/usr/bin/python
</span><span class="gp">$</span><span class="w"> </span>which python
<span class="go">/creiglas/eecs298/env/bin/python
</span></code></pre></div></div>

<p>Finally, the <code class="language-plaintext highlighter-rouge">activate</code> script sets a <code class="language-plaintext highlighter-rouge">$VIRTUAL_ENV</code> environment variable, which contains the path to the virtual environment directory.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$VIRTUAL_ENV</span>
<span class="go">/creiglas/eecs298/env
</span></code></pre></div></div>

<h3 id="replicate-a-virtual-environment">Replicate a virtual environment</h3>
<p>In the previous section, we created a Python virtual environment, activated it, and upgraded the Python installer tools (<code class="language-plaintext highlighter-rouge">pip</code>, <code class="language-plaintext highlighter-rouge">setuptools</code>, <code class="language-plaintext highlighter-rouge">wheel</code>).  We have not yet installed any new third party Python packages.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/creiglas/eecs298/
</span><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$VIRTUAL_ENV</span>
<span class="go">/creiglas/eecs298/env
</span><span class="gp">$</span><span class="w"> </span>pip list
<span class="go">Package    Version
---------- -------
pip        20.1.1
setuptools 47.3.1
wheel      0.34.2
</span></code></pre></div></div>

<h3 id="deactivate-a-virtual-environment">Deactivate a virtual environment</h3>
<p>The <code class="language-plaintext highlighter-rouge">deactivate</code> command simply modifies two environment variables, <code class="language-plaintext highlighter-rouge">PATH</code> and <code class="language-plaintext highlighter-rouge">VIRTUAL_ENV</code>.  First, it unsets <code class="language-plaintext highlighter-rouge">VIRTUAL_ENV</code>.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>deactivate
<span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$VIRTUAL_ENV</span>  <span class="c"># Variable not set, output is blank</span>
<span class="go">
</span></code></pre></div></div>

<p>Finally, <code class="language-plaintext highlighter-rouge">deactivate</code> changes <code class="language-plaintext highlighter-rouge">PATH</code> to its previous value, before the virtual environment was activated.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">echo</span> <span class="nv">$PATH</span> | <span class="nb">tr</span> <span class="s1">':'</span> <span class="s1">'\n'</span>
<span class="go">/usr/local/bin
/usr/bin
/bin
</span></code></pre></div></div>

<h2 id="summary">Summary</h2>
<p>A Python virtual environment helps you manage third party packages.  A pre-configured <code class="language-plaintext highlighter-rouge">python</code> executable in <code class="language-plaintext highlighter-rouge">./env/bin/</code> uses the third party packages in <code class="language-plaintext highlighter-rouge">./env/lib/</code> (the name of <code class="language-plaintext highlighter-rouge">env/</code> is your choice).</p>

<p>Activate the virtual environment each time you start a new shell.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span><span class="nb">pwd</span>
<span class="go">/creiglas/eecs298/
</span><span class="gp">$</span><span class="w"> </span><span class="nb">source env</span>/bin/activate
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">activate</code> script changes the <code class="language-plaintext highlighter-rouge">PATH</code> environment variable, which temporarily changes the default <code class="language-plaintext highlighter-rouge">python</code> and <code class="language-plaintext highlighter-rouge">pip</code> executables.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>which python
<span class="go">/creiglas/eecs298/env/bin/python
</span><span class="gp">$</span><span class="w"> </span>which pip
<span class="go">/creiglas/eecs298/env/bin/pip
</span></code></pre></div></div>

<h2 id="acknowledgments">Acknowledgments</h2>
<p>Original document written by Andrew DeOrio <a href="mailto:awdeorio@umich.edu">awdeorio@umich.edu</a>.</p>

<p>This document is licensed under a <a href="https://creativecommons.org/licenses/by-nc/4.0/">Creative Commons Attribution-NonCommercial 4.0 License</a>. You’re free to copy and share this document, but not to sell it.  You may not share source code provided with this document.</p>


            
        </div> <!-- .container-lg -->

        
    </body>
</html>
